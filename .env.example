###############################################################################
# Environment Variables Configuration
###############################################################################
#
# This file serves as a template for environment variables used in this project.
#
# SETUP INSTRUCTIONS:
# 1. Copy this file to `.env.local` in the project root:
#    cp .env.example .env.local
# 2. Fill in the actual values for your environment
# 3. NEVER commit `.env.local` or any `.env*` file except `.env.example`
#
# NEXT.JS NOTES:
# - Variables without `NEXT_PUBLIC_` prefix are server-only (not exposed to client)
# - Variables with `NEXT_PUBLIC_` prefix are inlined at build time and exposed to client
# - Only use `NEXT_PUBLIC_` for variables that are safe to expose publicly
#
###############################################################################

###############################################################################
# CORE CONFIGURATION (Currently Used)
###############################################################################

# Node Environment
# Type: Required (but has default)
# Values: "development" | "test" | "production"
# Default: "development" (set automatically by Next.js/Bun in most cases)
# Description: Controls the runtime environment. Affects logging, error handling,
# and feature flags.
NODE_ENV=development

# Database Connection URL (Runtime – Supabase pooler)
# Type: REQUIRED
# Format: postgresql://[user]:[password]@[host]:[port]/[database]?schema=[schema]&pgbouncer=true
# Example (local dev): postgresql://postgres:password@localhost:5432/erechnung?schema=public
# Example (Supabase pooled):
#   postgres://user:pass@aws-0-region.pooler.supabase.com:6543/postgres?pgbouncer=true
# Description: PostgreSQL connection string for Prisma ORM at runtime (uses pooling).
DATABASE_URL=postgresql://postgres:password@localhost:5432/erechnung?schema=public

# Direct Database Connection URL (Migrations/maintenance – direct)
# Type: REQUIRED
# Format: postgresql://[user]:[password]@[host]:[port]/[database]?schema=[schema]
# Example (Supabase direct):
#   postgres://postgres:pass@aws-0-region.supabase.com:5432/postgres?schema=public
# Description: Direct PostgreSQL connection string for Prisma migrations and
# one-off maintenance.
DIRECT_URL=postgresql://postgres:password@localhost:5432/erechnung?schema=public

# Logging Level
# Type: Optional (has default)
# Values: "fatal" | "error" | "warn" | "info" | "debug" | "trace" | "silent"
# Default: "info"
# Description: Minimum log level for Pino logger. Controls verbosity of
# application logs.
# Development: Use "debug" or "trace" for detailed logs
# Production: Use "info" or "warn" to reduce noise
LOG_LEVEL=info

###############################################################################
# SUPABASE CONFIGURATION
###############################################################################

# Supabase Project URL
# Type: REQUIRED
# Example: https://xyzcompany.supabase.co
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Supabase Publishable Key (public client)
# Type: REQUIRED
# Description: New-style publishable key (replaces legacy anon key) used on both
# server and client. Safe to expose publicly.
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=sb_publishable_your_key_here

# Supabase Service Role Key (server-only)
# Type: REQUIRED (server)
# Description: HIGHLY privileged key, NEVER expose to the browser. Used only from
# server-side code for Storage admin operations, RLS management, etc.
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Site URL (for auth redirects)
# Type: REQUIRED
# Format: Full URL with protocol and domain
# Example: http://localhost:3000 (development) or https://yourdomain.com (production)
# Description: Base URL of your application, used for Supabase auth redirects
NEXT_PUBLIC_SITE_URL=http://localhost:3000

###############################################################################
# STORAGE CONFIGURATION (TODO - Not Yet Implemented)
###############################################################################
# These variables will be used when implementing non-Supabase storage backends
# (local filesystem, AWS S3, Cloudflare R2). Supabase Storage is configured via
# the SUPABASE_* variables above.

# Storage Driver
# Type: Optional (TODO)
# Values: "local" | "s3" | "r2"
# Default: "local" (for development)
# Description: Storage backend to use for file uploads (invoices, exports, etc.)
# STORAGE_DRIVER=local

# Local Storage Directory (for STORAGE_DRIVER=local)
# Type: Optional (TODO)
# Format: Absolute or relative path to directory
# Default: "./storage" (relative to project root)
# Description: Directory where files are stored when using local storage driver.
# Note: Ensure directory exists and is writable
# STORAGE_LOCAL_DIR=./storage

# S3/R2 Bucket Name
# Type: Optional (TODO, required if STORAGE_DRIVER is "s3" or "r2")
# Format: Bucket name string
# Description: Name of the S3 bucket or R2 bucket for storing files
# STORAGE_BUCKET=your-bucket-name

# S3/R2 Region
# Type: Optional (TODO, required for S3)
# Format: AWS region identifier (e.g., "us-east-1", "eu-central-1")
# Description: AWS region where the S3 bucket is located (not needed for R2)
# STORAGE_REGION=us-east-1

# S3/R2 Endpoint URL
# Type: Optional (TODO, required for R2, optional for S3)
# Format: Full URL to S3-compatible API endpoint
# Description: Custom endpoint URL for S3-compatible services (e.g., R2, MinIO)
# Example for R2: https://[account-id].r2.cloudflarestorage.com
# Example for MinIO: http://localhost:9000
# STORAGE_ENDPOINT=https://[account-id].r2.cloudflarestorage.com

# S3/R2 Access Key ID
# Type: Optional (TODO, required if STORAGE_DRIVER is "s3" or "r2")
# Format: Access key string
# Description: Access key ID for authenticating with S3/R2 API
# STORAGE_ACCESS_KEY_ID=your-access-key-id

# S3/R2 Secret Access Key
# Type: Optional (TODO, required if STORAGE_DRIVER is "s3" or "r2")
# Format: Secret key string
# Description: Secret access key for authenticating with S3/R2 API
# Security: Keep this secret! Never commit to version control.
# STORAGE_SECRET_ACCESS_KEY=your-secret-access-key

# Storage Public Base URL
# Type: Optional (TODO)
# Format: Full URL with protocol and domain
# Description: Public base URL for accessing stored files (for generating
# download links)
# Example: https://cdn.example.com or https://[bucket].s3.amazonaws.com
# STORAGE_PUBLIC_BASE_URL=https://cdn.example.com

###############################################################################
# AUTHENTICATION & SESSION (TODO - Not Yet Implemented)
###############################################################################

# Session Secret
# Type: Optional (TODO, required for production)
# Format: Cryptographically secure random string (min. 32 characters)
# Description: Secret key used to sign and encrypt session cookies
# Security: Generate a strong random secret (e.g., `openssl rand -base64 32`)
# Note: Use different secrets for development and production
# SESSION_SECRET=your-super-secret-session-key-min-32-chars

# Session Cookie Name
# Type: Optional (TODO)
# Format: Cookie name string
# Default: "session" (if not set)
# Description: Name of the HTTP cookie used to store session data
# SESSION_COOKIE_NAME=session

# Session Maximum Age
# Type: Optional (TODO)
# Format: Number of seconds
# Default: 86400 (24 hours)
# Description: Maximum age of a session in seconds before it expires
# SESSION_MAX_AGE_SECONDS=86400

###############################################################################
# STRIPE INTEGRATION
###############################################################################

# Stripe Secret Key
# Type: REQUIRED (for Stripe integration)
# Format: Stripe secret key (starts with "sk_")
# Description: Secret API key for authenticating Stripe API requests
# Security: Keep this secret! Use test keys for development, live keys for
# production.
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# Stripe Webhook Secret
# Type: REQUIRED (for webhook verification)
# Format: Stripe webhook signing secret (starts with "whsec_")
# Description: Secret used to verify that webhook requests come from Stripe
# Security: Keep this secret! Different for each webhook endpoint.
# Get from: Stripe Dashboard > Webhooks > [Your endpoint] > Signing secret
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_signing_secret

# Stripe Price ID – Pro Plan
# Type: REQUIRED
# Format: Stripe price ID (starts with "price_")
# Description: Price ID for the Pro plan (€29/month)
# Get from: Stripe Dashboard > Products > Pro plan > Price ID
STRIPE_PRICE_ID_PRO=price_your_pro_price_id

# Stripe Price ID – Business Plan
# Type: REQUIRED
# Format: Stripe price ID (starts with "price_")
# Description: Price ID for the Business plan (€99/month)
# Get from: Stripe Dashboard > Products > Business plan > Price ID
STRIPE_PRICE_ID_BUSINESS=price_your_business_price_id

# Stripe Publishable Key (Client-side)
# Type: Optional (only if client-side Stripe.js integration is needed)
# Format: Stripe publishable key (starts with "pk_")
# Description: Publishable API key for client-side Stripe.js integration
# Note: This is safe to expose to the client (hence NEXT_PUBLIC_ prefix)
# NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key

###############################################################################
# RATE LIMITING (TODO - Not Yet Implemented)
###############################################################################

# Rate Limit: Maximum Requests
# Type: Optional (TODO)
# Format: Positive integer
# Default: 100 (if not set)
# Description: Maximum number of requests allowed per window
# RATE_LIMIT_MAX_REQUESTS=100

# Rate Limit: Time Window
# Type: Optional (TODO)
# Format: Number of milliseconds
# Default: 60000 (1 minute)
# Description: Time window in milliseconds for rate limiting
# Example: 60000 = 1 minute, 3600000 = 1 hour
# RATE_LIMIT_WINDOW_MS=60000

###############################################################################
# GOOGLE CLOUD VISION API (OCR)
###############################################################################

# OCR Mock Mode
# Type: Optional
# Values: "true" | "false"
# Default: Not set (uses real API)
# Description: When "true", uses MockOcrService with pre-defined JSON responses
# from /mocks/ocr-responses/ instead of calling Google Cloud Vision API.
# Useful for local development without incurring API costs.
# OCR_MOCK_ENABLED=true

# VIES VAT Validation Toggle
# Type: Optional
# Values: "true" | "false"
# Default: "true"
# Description: Enables/disables external VIES VAT-ID validation requests.
# Set to "false" in test environments to avoid outbound VIES calls.
VIES_VALIDATION_ENABLED=true

# VIES Request Timeout (ms)
# Type: Optional
# Format: Positive integer (milliseconds)
# Default: 3500
# Description: Timeout for external VIES requests before falling back to
# local-only validation.
VIES_TIMEOUT_MS=3500

# Google Cloud Vision API Key
# Type: REQUIRED for OCR functionality (not needed when OCR_MOCK_ENABLED=true)
# Format: API key string
# Description: API key for Google Cloud Vision OCR service
# Get from: https://console.cloud.google.com/apis/credentials
# Security: Keep this secret! Server-only variable.
GOOGLE_CLOUD_VISION_API_KEY=your-google-cloud-vision-api-key

# Google Cloud Project ID
# Type: Optional (useful for quota monitoring)
# Format: Google Cloud project ID
# Description: Your Google Cloud project ID for the Vision API
GOOGLE_CLOUD_PROJECT_ID=your-gcp-project-id

###############################################################################
# TELEMETRY & OBSERVABILITY (Optional TODO - Not Yet Implemented)
###############################################################################

# OpenTelemetry Service Name
# Type: Optional (TODO)
# Format: Service name string
# Default: "e-rechnung" (if not set)
# Description: Service name used in telemetry traces and metrics
# OTEL_SERVICE_NAME=e-rechnung

# OpenTelemetry OTLP Endpoint
# Type: Optional (TODO)
# Format: Full URL to OTLP collector endpoint
# Description: Endpoint URL for sending OpenTelemetry traces/metrics
# Example: http://localhost:4318/v1/traces (HTTP) or http://localhost:4317 (gRPC)
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318/v1/traces

###############################################################################
# EMAIL CONFIGURATION (Resend)
###############################################################################

# Resend API Key
# Type: REQUIRED for email functionality
# Format: API key string (starts with "re_")
# Description: API key for Resend email service
# Get from: https://resend.com/api-keys
# Security: Keep this secret! Server-only variable.
RESEND_API_KEY=re_your_resend_api_key

# From Email Address
# Type: REQUIRED for email functionality
# Format: Valid email address
# Description: The "from" address for all transactional emails
# Note: Must be a verified domain in Resend
FROM_EMAIL=noreply@e-rechnung.app

###############################################################################
# ZUGFeRD / XRechnung Configuration (E-Invoice Parser)
###############################################################################

# Schema Validation Mode
# Type: Optional
# Values: "strict" | "lax" | "disabled"
# Default: "lax"
# Description: Controls XML schema validation strictness
# - "strict": Full XSD schema validation (requires schema files)
# - "lax": Well-formedness + required field validation only
# - "disabled": Only parse XML, no validation
ZUGFERD_VALIDATION_MODE=lax

# Schema Files Directory
# Type: Optional
# Format: Absolute or relative path to directory containing XSD files
# Default: "./src/lib/zugferd/schemas"
# Description: Directory containing ZUGFeRD/XRechnung XSD schema files
# Note: Required only when VALIDATION_MODE=strict
# ZUGFERD_SCHEMA_DIR=./src/lib/zugferd/schemas

# Max Invoice File Size (bytes)
# Type: Optional
# Format: Number of bytes
# Default: 10485760 (10 MB)
# Description: Maximum size of uploaded invoice files (PDF or XML)
ZUGFERD_MAX_FILE_SIZE=10485760

###############################################################################
# NOTES
###############################################################################
#
# - All variables marked as "TODO" are placeholders for future features
# - Variables in "CORE CONFIGURATION", "SUPABASE CONFIGURATION", and
#   "STRIPE INTEGRATION" sections are currently required/used
# - For production deployments, ensure all secrets are properly managed
#   (e.g., via a secrets manager)
# - Use different values for development, staging, and production environments
#
###############################################################################
